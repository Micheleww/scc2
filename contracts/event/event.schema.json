{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "contracts/event/event.schema.json",
  "title": "SCC Event v1 (jsonl row)",
  "type": "object",
  "additionalProperties": false,
  "required": ["schema_version", "t", "event_type", "task_id"],
  "properties": {
    "schema_version": { "const": "scc.event.v1" },
    "t": { "type": "string", "minLength": 1, "format": "date-time" },
    "event_type": {
      "enum": [
        "SUCCESS",
        "PINS_INSUFFICIENT",
        "PREFLIGHT_FAILED",
        "CI_FAILED",
        "EXECUTOR_ERROR",
        "RETRY_EXHAUSTED",
        "POLICY_VIOLATION",
        "ROLLBACK_APPLIED"
      ]
    },
    "task_id": { "type": "string", "minLength": 1 },
    "parent_id": { "type": ["string", "null"] },
    "role": { "type": ["string", "null"] },
    "area": { "type": ["string", "null"] },
    "executor": { "type": ["string", "null"] },
    "model": { "type": ["string", "null"] },
    "reason": { "type": ["string", "null"] },
    "details": { "type": ["object", "null"], "additionalProperties": true }
  }
}
