{
  "schema_version": "scc.playbook.v1",
  "playbook_id": "pb.timeout.codex.v1",
  "version": "1.0.0",
  "pattern_id": "timeout.codex",
  "enablement": {
    "schema_version": "scc.enablement.v1",
    "status": "gray",
    "rollout": {
      "mode": "percent",
      "percent": 10
    },
    "rollback_conditions": [
      { "metric": "timeout_rate_15m", "op": ">", "threshold": 0.01 },
      { "metric": "p95_task_duration_s", "op": ">", "threshold": 900 }
    ]
  },
  "actions": [
    {
      "type": "note",
      "params": {
        "message": "Mitigate codex timeouts by splitting into smaller subtasks and routing to an alternate executor/model when a timeout recurs."
      }
    },
    {
      "type": "split_v2",
      "params": {
        "max_subtasks": 3,
        "hint": "Keep each subtask bounded (single directory/single failure), and run the smallest allowed smoke test early."
      }
    },
    {
      "type": "route",
      "params": {
        "preferred_executor": "opencodecli",
        "preferred_model": "opencode/kimi-k2.5-free",
        "fallback_executor": "codex"
      }
    }
  ],
  "notes": null
}
