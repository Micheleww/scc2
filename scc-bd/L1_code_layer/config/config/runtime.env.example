# Copy to `runtime.env` and edit values as needed.
# This file is read by `scripts/daemon-start.ps1` and applied as environment variables for gateway + ensure-workers.

# Ports / upstreams
GATEWAY_PORT=18788
SCC_UPSTREAM=http://127.0.0.1:18789
OPENCODE_UPSTREAM=http://127.0.0.1:18790

# Concurrency (internal runner)
EXEC_CONCURRENCY_CODEX=4
EXEC_CONCURRENCY_OPENCODE=6

# External worker throttles (if you use worker mode)
EXTERNAL_MAX_CODEX=4
EXTERNAL_MAX_OPENCODECLI=6

# Desired executor share for board tasks (if a task allows both codex+occli)
DESIRED_RATIO_CODEX=4
DESIRED_RATIO_OPENCODECLI=6

# Timeouts
EXEC_TIMEOUT_CODEX_MS=1200000
EXEC_TIMEOUT_OPENCODE_MS=1200000

# Model pools (OpenCode free models + vision subset)
MODEL_POOL_FREE=opencode/glm-4.7-free,opencode/kimi-k2.5-free,opencode/gpt-5-nano,opencode/minimax-m2.1-free,opencode/trinity-large-preview-free,opencode/big-pickle
MODEL_POOL_VISION=opencode/kimi-k2.5-free,opencode/gpt-5-nano
MODEL_POOL_PAID=gpt-5.3,gpt-5.2,gpt-5.1-codex-max

# Codex (codexcli) default/allowlist
CODEX_MODEL=gpt-5.3
CODEX_MODEL_PREFERRED=gpt-5.3,gpt-5.2,gpt-5.1-codex-max
WORKER_MODELS_CODEX=gpt-5.3,gpt-5.2,gpt-5.1-codex-max
STRICT_DESIGNER_MODEL=gpt-5.3

# Optional: override task.allowedModels and force all Codex dispatch to this model.
# FORCE_CODEX_MODEL=gpt-5.3

# Gates policy (production defaults)
CI_GATES_STRICT=true
PINS_V2_REQUIRED=true
MAP_MAX_AGE_HOURS=168
MAP_SQLITE_REQUIRED=false
SSOT_GATE_STRICT=false
MAP_QUERY_BACKEND=sqlite
MAP_PINS_QUERY_BACKEND=sqlite
MAP_BUILD_SQLITE=true
SSOT_AUTO_PR_BUNDLE=true

# Auto-assign occli model per task (round-robin in MODEL_POOL_FREE; use MODEL_POOL_VISION for vision-like tasks)
AUTO_ASSIGN_OPENCODE_MODELS=true

# Worker autoscaling script (if you run ensure-workers)
DESIRED_CODEX=4
DESIRED_OPENCODECLI=6
MIN_RUNNING=4
WORKER_IDLE_EXIT_SECONDS=300
WORKER_STALL_SECONDS=240
